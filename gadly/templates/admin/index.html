<!DOCTYPE html>
<html lang="en">

<head>
  {% load static %}
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="{% static 'img/apple-icon.png' %}">
  <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}">
  <title>Gadly</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="{% static 'css/nucleo-icons.css' %}" rel="stylesheet" /> 
  <link href="{% static 'css/nucleo-svg.css' %}" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="{% static 'css/nucleo-svg.css' %}" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="{% static 'css/argon-dashboard.css' %}" rel="stylesheet" /> 
  <style>
    .glass {
      background-color: rgba(255, 255, 255, 0.45);
      backdrop-filter: blur(15px);
      box-shadow: 0 0 10px 1px rgb(0 0 0 / 25%);
    }
  </style>
</head>

<body class="g-sidenav-show bg-gray-100">
  {% include './includes/sidebar.html' %}
  <main class="main-content position-relative border-radius-lg ">
    <!-- Navbar -->
    {% include './includes/navbar.html' %}
    <!-- End Navbar -->
    <div class="container-fluid py-4">
      <!---->
      <div class="row">
        <div class="col-lg-7 mb-lg-0 w-100">
          <div class="card z-index-2 glass">
            <div class="card-header pb-0 pt-3 bg-transparent">
              <h5 class="text-capitalize">Dashboard</h5>
            </div>
            <div class="card-body p-3" style="height:73vh">
              <div class="row">
                <div class="col-4">
                  <div class="card">
                    <div class="card-body text-center">
                      <h4>Users:</h4>
                      <h5>{{count.users}}</h5>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="card">
                    <div class="card-body text-center">
                      <h4>Paraphrases:</h4>
                      <h5>{{count.paras}}</h5>
                    </div>
                  </div>
                </div>
                <div class="col-4">
                  <div class="card">
                    <div class="card-body text-center">
                      <h4>Replacements:</h4>
                      <h5>{{count.reps}}</h5>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-4" style="width: 20vw;">
                  <canvas id="count_chart"></canvas>
                </div>
                <div class="col-4">
                  <canvas id="det_chart"></canvas>
                </div>
                <div class="col-4">
                  <canvas id="rep_chart"></canvas>
                </div>
              </div>
              <div class="row">
                <div class="col-3">

                </div>
                <div class="col-3">
                  <canvas id="cdet_chart"></canvas>
                </div>
                <div class="col-3">
                  <canvas id="crepl_chart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
        
      {% include './includes/footer.html' %} 
    </div>
  </main>
  {% include './includes/settings.html' %} 
  <!--   Core JS Files   -->
  <script src="{% static 'js/core/popper.min.js' %}"></script>
  <script src="{% static 'js/core/bootstrap.min.js' %}"></script>
  <script src="{% static 'js/plugins/perfect-scrollbar.min.js' %}"></script>
  <script src="{% static 'js/plugins/smooth-scrollbar.min.js' %}"></script>
  <script src="{% static 'js/plugins/chartjs.min.js' %}"></script>

  <script>
    var count_x = {{ count_chart.x|safe }}
    var count_y = {{ count_chart.y|safe }}

    var ctx = document.getElementById('count_chart');
    var chart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: count_x,
        datasets: [{
          data: count_y,
          backgroundColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            'rgb(255, 205, 86)'
          ],
          borderColor: [
            'rgb(255, 99, 132)',
            'rgb(54, 162, 235)',
            'rgb(255, 205, 86)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        plugins:{
          title:{
            display: true,
            text: "Totals",
            font:{
              size: 20,
            }
          },
        }
      }
    });

    var det_x = {{ det_chart.x|safe }}
    var det_y = {{ det_chart.y|safe }}

    var ctx = document.getElementById('det_chart');
    var chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: det_x,
        datasets: [{
          label: 'Number of Detections',
          data: det_y,
          backgroundColor: 'rgba(16, 180, 161, 0.5)',
          borderColor: 'rgba(16, 250, 86, 0.5)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            ticks: {
              stepSize: 1,
              beginAtZero: true,
            }
          }
        },
        plugins:{
          title:{
            display: true,
            text: "Top Detections",
            font:{
              size: 20,
            }
          },
        }
      }
    });

    var rep_x = {{ rep_chart.x|safe }}
    var rep_y = {{ rep_chart.y|safe }}

    var ctx = document.getElementById('rep_chart');
    var chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: rep_x,
        datasets: [{
          label: 'Number of Replacements',
          data: rep_y,
          backgroundColor: 'rgba(16, 180, 161, 0.5)',
          borderColor: 'rgba(16, 250, 86, 0.5)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            ticks: {
              stepSize: 1,
              beginAtZero: true,
            }
          }
        },
        plugins:{
          title:{
            display: true,
            text: "Top Replacements",
            font:{
              size: 20,
            }
          },
        }
      }
    });

    var cdet_x = {{ cdet_chart.x|safe }}
    var cdet_y = {{ cdet_chart.y|safe }}

    var ctx = document.getElementById('cdet_chart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: cdet_x,
        datasets: [{
          label: 'Month',
          data: cdet_y,
          backgroundColor: 'rgba(16, 180, 161, 0.5)',
          borderColor: 'rgba(16, 250, 86, 0.5)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            ticks: {
              stepSize: 1,
              beginAtZero: true,
            }
          }
        },
        plugins:{
          title:{
            display: true,
            text: "Detections Per Month",
            font:{
              size: 20,
            }
          },
        }
      }
    });

    var crepl_x = {{ crepl_chart.x|safe }}
    var crepl_y = {{ crepl_chart.y|safe }}

    var ctx = document.getElementById('crepl_chart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: crepl_x,
        datasets: [{
          label: 'Month',
          data: crepl_y,
          backgroundColor: 'rgba(16, 180, 161, 0.5)',
          borderColor: 'rgba(16, 250, 86, 0.5)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            ticks: {
              stepSize: 1,
              beginAtZero: true,
            }
          }
        },
        plugins:{
          title:{
            display: true,
            text: "Replacements Per Month",
            font:{
              size: 20,
            }
          },
        }
      }
    });
  </script>
  
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="{% static 'js/argon-dashboard.min.js' %}"></script>
  <script
  src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
  </script>
 <script>
  function runSpeechRecognition() {
      var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition
      var recognition = new SpeechRecognition()
  
      recognition.onstart = function() {
        $('#action').html(" <small>listening, please speak...</small>")
      };
      
      recognition.onspeechend = function() {
        $('#action').html(" <small>stopped listening, hope you are done...</small>")
        recognition.stop()
      }
    
      recognition.onresult = function(event) {
        var transcript = event.results[0][0].transcript
        $('#input').html(transcript)
      };
    
      recognition.start();
    }
  </script>
</body>

</html>
